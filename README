protograph
----------

* Introduction

* ...

* Example session

[ ~]# telnet localhost 10101
Trying 127.0.0.1...
Connected to localhost (127.0.0.1).
Escape character is '^]'.
graphd localhost
create db
ok
use db
ok
cvert a {"city":"minneapolis"} 
ok CMD_CVERT a
cvert b {"city":"boston"}
ok CMD_CVERT b
cvert c {"city":"atlanta"}
ok CMD_CVERT c
cvert d {"city":"chicago"}
ok CMD_CVERT d
cvert e {"city":"los angeles"}
ok CMD_CVERT e
cvert f {"city":"honolulu"}
ok CMD_CVERT f
cvert g {"city":"houston"}
ok CMD_CVERT g
cvert h {"city":"miami"}
ok CMD_CVERT h
cvert i {"city":"new york city"}
ok CMD_CVERT i
cedge e1 a b flight-to {"distance":2014}
ok CMD_CEDGE e1
cedge e2 a d flight-to {"distance":780} 
ok CMD_CEDGE e2
cedge e3 d e flight-to {"distance":2200}
ok CMD_CEDGE e3
cedge e4 e f flight-to {"distance":2600}
ok CMD_CEDGE e4
cedge e5 b i bus-route {"cost":46} 
ok CMD_CEDGE e5
cedge e6 d c flight-to {"cost":320} 
ok CMD_CEDGE e6
cedge e7 e c flight-to {"cost":199}
ok CMD_CEDGE e7
cedge e8 e g flight-to {"cost":169}
ok CMD_CEDGE e8
cedge e9 f g flight-to {"cost":349}
ok CMD_CEDGE e9
cedge e10 c e flight-to {"cost":299}
ok CMD_CEDGE e10
cedge e11 a e flight-to {"cost":399}
ok CMD_CEDGE e11
cedge e12 i j flight-to {"cost":2000}
ok CMD_CEDGE e12
cedge e13 j k flight-to {"cost":2000}
ok CMD_CEDGE e13
cedge e14 k m flight-to {"cost":2000}
ok CMD_CEDGE e14
cedge e15 i k flight-to {"cost":2000}
ok CMD_CEDGE e15
cedge e16 k m flight-to {"cost":2000}
ok CMD_CEDGE e16
spath a b
{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'b','city':'boston'},"data":{"id":"e1","distance":2014},"rel":"flight-to"}
done
spath a c
{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'d','city':'chicago'},"data":{"id":"e2","distance":780},"rel":"flight-to"}
{"v1":{'id':'d','city':'chicago'},"v2":{'id':'c','city':'atlanta'},"data":{"id":"e6","cost":320},"rel":"flight-to"}
done
spath a e
{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'e','city':'los angeles'},"data":{"id":"e11","cost":399},"rel":"flight-to"}
done
q cost:[200 400]
{"_type":"edge","_key":"e6","cost":"320"}
{"_type":"edge","_key":"e9","cost":"349"}
{"_type":"edge","_key":"e10","cost":"299"}
{"_type":"edge","_key":"e11","cost":"399"}
done
q city:hon*
{"_type":"vertex","_key":"f","city":"honolulu"}
{"_type":"vertex","_key":"l","city":"hong kong"}
done
spath a g
{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'e','city':'los angeles'},"data":{"id":"e11","cost":399},"rel":"flight-to"}
{"v1":{'id':'e','city':'los angeles'},"v2":{'id':'g','city':'houston'},"data":{"id":"e8","cost":169},"rel":"flight-to"}
done
kspath a m 3
{"weight":4,"path":[{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'b','city':'boston'},"data":{"id":"e1","_toVertex":"b","_fromVertex":"a","distance":2014,"_weight":1,"_rel":"flight-to"},"rel":"flight-to"},{"v1":{'id':'b','city':'boston'},"v2":{'id':'i','city':'new york city'},"data":{"id":"e5","_toVertex":"i","_fromVertex":"b","_weight":1,"_rel":"bus-route","cost":46},"rel":"bus-route"},{"v1":{'id':'i','city':'new york city'},"v2":{'id':'k','city':'beijing'},"data":{"id":"e15","_toVertex":"k","_fromVertex":"i","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"},{"v1":{'id':'k','city':'beijing'},"v2":{'id':'m','city':'auckland'},"data":{"id":"e14","_toVertex":"m","_fromVertex":"k","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"}]}
{"weight":5,"path":[{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'b','city':'boston'},"data":{"id":"e1","_toVertex":"b","_fromVertex":"a","distance":2014,"_weight":1,"_rel":"flight-to"},"rel":"flight-to"},{"v1":{'id':'b','city':'boston'},"v2":{'id':'i','city':'new york city'},"data":{"id":"e5","_toVertex":"i","_fromVertex":"b","_weight":1,"_rel":"bus-route","cost":46},"rel":"bus-route"},{"v1":{'id':'i','city':'new york city'},"v2":{'id':'j','city':'tokyo'},"data":{"id":"e12","_toVertex":"j","_fromVertex":"i","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"},{"v1":{'id':'j','city':'tokyo'},"v2":{'id':'k','city':'beijing'},"data":{"id":"e13","_toVertex":"k","_fromVertex":"j","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"},{"v1":{'id':'k','city':'beijing'},"v2":{'id':'m','city':'auckland'},"data":{"id":"e14","_toVertex":"m","_fromVertex":"k","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"}]}
done
spy m
{
    "city": "auckland",
    "id": "m"
}
done
spy e15
{
    "data": {
        "_fromVertex": "i",
        "_rel": "flight-to",
        "_toVertex": "k",
        "_weight": 1,
        "cost": 2000,
        "id": "e15"
    },
    "rel": "flight-to",
    "v1": {
        "city": "new york city",
        "id": "i"
    },
    "v2": {
        "city": "beijing",
        "id": "k"
    }
}
done
set e15 _weight 2.5
done
kspath a m 3
{"weight":5,"path":[{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'b','city':'boston'},"data":{"id":"e1","_toVertex":"b","_fromVertex":"a","distance":2014,"_weight":1,"_rel":"flight-to"},"rel":"flight-to"},{"v1":{'id':'b','city':'boston'},"v2":{'id':'i','city':'new york city'},"data":{"id":"e5","_toVertex":"i","_fromVertex":"b","_weight":1,"_rel":"bus-route","cost":46},"rel":"bus-route"},{"v1":{'id':'i','city':'new york city'},"v2":{'id':'j','city':'tokyo'},"data":{"id":"e12","_toVertex":"j","_fromVertex":"i","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"},{"v1":{'id':'j','city':'tokyo'},"v2":{'id':'k','city':'beijing'},"data":{"id":"e13","_toVertex":"k","_fromVertex":"j","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"},{"v1":{'id':'k','city':'beijing'},"v2":{'id':'m','city':'auckland'},"data":{"id":"e14","_toVertex":"m","_fromVertex":"k","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"}]}
{"weight":5.5,"path":[{"v1":{'id':'a','city':'minneapolis'},"v2":{'id':'b','city':'boston'},"data":{"id":"e1","_toVertex":"b","_fromVertex":"a","distance":2014,"_weight":1,"_rel":"flight-to"},"rel":"flight-to"},{"v1":{'id':'b','city':'boston'},"v2":{'id':'i','city':'new york city'},"data":{"id":"e5","_toVertex":"i","_fromVertex":"b","_weight":1,"_rel":"bus-route","cost":46},"rel":"bus-route"},{"v1":{'id':'i','city':'new york city'},"v2":{'id':'k','city':'beijing'},"data":{"id":"e15","_toVertex":"k","_fromVertex":"i","_weight":"2.5","_rel":"flight-to","cost":2000},"rel":"flight-to"},{"v1":{'id':'k','city':'beijing'},"v2":{'id':'m','city':'auckland'},"data":{"id":"e14","_toVertex":"m","_fromVertex":"k","_weight":1,"_rel":"flight-to","cost":2000},"rel":"flight-to"}]}
done

-----

create db4
use db4
cvert a {"city":"minneapolis"} 
ok CMD_CVERT a
cvert b {"city":"duluth"}
ok CMD_CVERT b
cvert c {"city":"rockville"}
ok CMD_CVERT c
cedge e1 a b flight-to {"cost": 1000}
ok CMD_CEDGE e1
cedge e2 b c flight-to {"cost": 1000}
ok CMD_CEDGE e2
cedge e3 a c flight-to {"cost": 1000}
ok CMD_CEDGE e3
hc 1
{'id':'c','city':'rockville'}
{'id':'b','city':'duluth'}
{'id':'a','city':'minneapolis'}
done
set e2 _weight 5.0
done
spy e2
{
    "data": {
        "_fromVertex": "b",
        "_rel": "flight-to",
        "_toVertex": "c",
        "_weight": "5.0",
        "cost": 1000,
        "id": "e2"
    },
    "rel": "flight-to",
    "v1": {
        "city": "duluth",
        "id": "b"
    },
    "v2": {
        "city": "rockville",
        "id": "c"
    }
}
done
hc 2
{'id':'b','city':'duluth'}
{'id':'c','city':'rockville'}
{'id':'a','city':'minneapolis'}
done

------

